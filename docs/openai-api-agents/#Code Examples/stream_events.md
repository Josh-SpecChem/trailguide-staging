stream_events.py â€” Streaming Event Types for OpenAI Agents
File Overview
This file defines the streaming event types used for real-time, incremental output from OpenAI-style agents. It includes event classes for raw LLM responses, agent-generated run items (messages, tool calls, handoffs, etc.), and agent updates. The unified StreamEvent type alias enables ergonomic handling of all event types in streaming loops, dashboards, or interactive applications.

Table of Contents
Key Classes and Types
Annotated Code Snippets
Function/Class Reference
Example Usage
Tips, Gotchas, and FAQ
Related Files
Key Classes and Types
Name	Purpose
RawResponsesStreamEvent	Represents a raw streaming event directly from the LLM.
RunItemStreamEvent	Represents a streaming event for a new agent-generated run item (message, tool, etc.).
AgentUpdatedStreamEvent	Indicates that a new agent is now running.
StreamEvent	Type alias for any of the above event types.
Annotated Code Snippets
1. RawResponsesStreamEvent
@dataclass
class RawResponsesStreamEvent:
    """Streaming event from the LLM. These are 'raw' events, i.e. they are directly passed through
    from the LLM.
    """
    data: TResponseStreamEvent
    type: Literal["raw_response_event"] = "raw_response_event"
Explanation:
Represents a raw event from the LLM's streaming API, passed through without modification.

2. RunItemStreamEvent
@dataclass
class RunItemStreamEvent:
    """Streaming events that wrap a `RunItem`. As the agent processes the LLM response, it will
    generate these events for new messages, tool calls, tool outputs, handoffs, etc.
    """
    name: Literal[
        "message_output_created",
        "handoff_requested",
        "handoff_occured",  # (Note: misspelled for backward compatibility)
        "tool_called",
        "tool_output",
        "reasoning_item_created",
        "mcp_approval_requested",
        "mcp_list_tools",
    ]
    item: RunItem
    type: Literal["run_item_stream_event"] = "run_item_stream_event"
Explanation:
Represents a semantic event generated by the agent, such as a new message, tool call, or handoff.

3. AgentUpdatedStreamEvent
@dataclass
class AgentUpdatedStreamEvent:
    """Event that notifies that there is a new agent running."""
    new_agent: Agent[Any]
    type: Literal["agent_updated_stream_event"] = "agent_updated_stream_event"
Explanation:
Signals that the currently running agent has changed (e.g., after a handoff).

4. StreamEvent Type Alias
StreamEvent: TypeAlias = Union[
    RawResponsesStreamEvent,
    RunItemStreamEvent,
    AgentUpdatedStreamEvent,
]
Explanation:
Unifies all streaming event types for ergonomic handling in event loops or UI frameworks.

Function/Class Reference
RawResponsesStreamEvent
Purpose: Represents a raw streaming event from the LLM.
Fields:
data: The raw LLM streaming event.
type: Always "raw_response_event".
RunItemStreamEvent
Purpose: Represents a semantic event generated by the agent (message, tool call, handoff, etc.).
Fields:
name: The event type (e.g., "message_output_created", "tool_called").
item: The generated run item.
type: Always "run_item_stream_event".
AgentUpdatedStreamEvent
Purpose: Indicates that a new agent is now running.
Fields:
new_agent: The new agent instance.
type: Always "agent_updated_stream_event".
StreamEvent
Purpose: Type alias for any streaming event type.
Usage: Use in event loops, streaming APIs, or UI frameworks to handle all event types.
Example Usage
1. Handling Streaming Events
async for event in result.stream_events():
    if isinstance(event, RawResponsesStreamEvent):
        print(event.data)
    elif isinstance(event, RunItemStreamEvent):
        print(f"Event: {event.name}, Item: {event.item}")
    elif isinstance(event, AgentUpdatedStreamEvent):
        print(f"Agent switched to: {event.new_agent.name}")
2. UI Integration
def handle_stream_event(event: StreamEvent):
    if event.type == "run_item_stream_event":
        update_ui_with_item(event.item)
    elif event.type == "agent_updated_stream_event":
        show_agent_switch(event.new_agent)
Tips, Gotchas, and FAQ
Misspelled Event Name:
"handoff_occured" is intentionally misspelled for backward compatibility. Do not change it unless you are ready for a breaking change.

Extensibility:
You can extend the event system by adding new event classes and updating the StreamEvent type alias.

Real-Time Processing:
Use these events for real-time dashboards, chat UIs, or developer tools that need to reflect agent progress incrementally.

Related Files
run.py
: Agent runner that emits streaming events.
items.py
: Run item types referenced in stream events.
agent.py
: Agent definitions referenced in agent update events.
For further details, see the source code and related modules.