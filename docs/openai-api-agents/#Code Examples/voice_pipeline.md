1. voice_pipeline.py — Voice Agent Pipeline
File Overview
Implements an opinionated voice agent pipeline that handles audio input (static or streamed), transcribes it to text, runs a workflow (e.g., an agent), and streams TTS audio output. Integrates with STT/TTS models and supports both single-turn and multi-turn (streamed) audio input.

Key Class
VoicePipeline
Purpose: Orchestrates the full voice agent pipeline: STT → workflow → TTS.
Constructor Parameters:
workflow: The workflow to run (see VoiceWorkflowBase).
stt_model, tts_model: Optional STT/TTS model instances or names.
config: Pipeline configuration (see VoicePipelineConfig).
Key Method:
async run(audio_input): Runs the pipeline on the given audio input (static or streamed).
Internal Methods:
_run_single_turn(audio_input): Handles single static audio input.
_run_multi_turn(audio_input): Handles streamed audio input with turn detection.
Example Usage
pipeline = VoicePipeline(workflow=my_workflow)
result = await pipeline.run(AudioInput(buffer=my_np_array))
async for event in result.stream():
    handle_audio_event(event)
2. pipeline_config.py — Voice Pipeline Configuration
File Overview
Defines the configuration class for the voice pipeline, including model provider, tracing, workflow name, group ID, and STT/TTS settings.

Key Class
VoicePipelineConfig
Purpose: Holds configuration for the voice pipeline.
Fields: model_provider, tracing_disabled, trace_include_sensitive_data, workflow_name, group_id, trace_metadata, stt_settings, tts_settings.
Example Usage
config = VoicePipelineConfig(workflow_name="My Voice Agent")
pipeline = VoicePipeline(workflow=my_workflow, config=config)
3. result.py — Streamed Audio Result
File Overview
Implements the StreamedAudioResult class, which streams audio and event data as they're generated by the pipeline. Handles text-to-speech chunking, buffering, and event dispatching.

Key Class
StreamedAudioResult
Purpose: Streams events and audio data from the voice pipeline.
Key Method: async stream(): Async iterator yielding VoiceStreamEvent objects.
Example Usage
async for event in result.stream():
    if event.type == "voice_stream_event_audio":
        play_audio(event.data)
4. events.py, input.py, utils.py — Voice Event Types and Utilities
File Overview
Defines event types for streaming audio, audio input/output utilities, and text splitting for TTS.

Key Classes and Functions
VoiceStreamEventAudio, VoiceStreamEventLifecycle, VoiceStreamEventError, VoiceStreamEvent: Event types for audio streaming.
AudioInput, StreamedAudioInput: Audio input utilities for static and streamed audio.
get_sentence_based_splitter(): Utility for splitting text into TTS-friendly chunks.
Example Usage
splitter = get_sentence_based_splitter()
chunk, remainder = splitter("This is a sentence. This is another.")
5. workflow.py — Voice Workflow Abstractions
File Overview
Provides abstract base classes and helpers for defining custom voice agent workflows, including single-agent workflows and helpers for extracting text from agent streams.

Key Classes
VoiceWorkflowBase: Abstract base class for voice workflows.
VoiceWorkflowHelper: Helper for extracting text from agent streaming results.
SingleAgentVoiceWorkflow: Simple workflow for running a single agent with input history.
Example Usage
class MyWorkflow(VoiceWorkflowBase):
    async def run(self, transcription: str):
        # Custom logic here
        yield "Response to: " + transcription

workflow = MyWorkflow()
pipeline = VoicePipeline(workflow=workflow)
Related Files
model.py
: STT/TTS model interfaces.
exceptions.py
: Error types for robust error handling.
run.py
: Agent runner logic that may use voice models.
For further details, see the source code and related modules.